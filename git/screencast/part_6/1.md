Бывают ситуации что возникают ошибки, которые замечены не сразу, а когда уже попали в репозиторий и хотелось бы отменить последний коммит или несколько последних коммитов и поменять там что-то.  

**git reset** - передаем ей коммит на который хотели бы вернуться, можно идентификатором, но обычно хотим вернуться на 1 или несколько коммитов назад. @ - HEAD, ~ - для получения родителя.  

                                    git reset @~ - родитель текущего коммита  

**git reset --hard** - жесткий вариант reset - передвигает текущую ветку на указанный коммит и обновляет рабочую директорию вместе с Index так чтобы они соответствовали состоянию проекта на момент этого коммита(т.е. и HEAD тоже теперь указывает на данный коммит). Если теперь сделать изменения и закоммитать - то родителем нового коммита будет текущая HEAD, а старый коммит теперь не участвует в разработке.  

Чтобы отменить этот жесткий reset - выполним **git reset --hard** (указатель на предыдущий коммит или ORIG_HEAD)  

По умолчанию, запись о недостижимых коммитах хранится в reflog как минимум 30 дней.  

Если в файлах были незакоммиченые изменения, то при жестком reset они пропадут - они просто будут заменены теми файлами, которые были на момент соответствующего коммита в репозитории. Эту особенность можно использовать для очистки локальной директории и индекса от незакоммиченых изменений:  

                                      git reset --hard HEAD

**git reset --soft** - переносит текущую ветку на указанный коммит, но в отличие от --hard - рабочую директорию и индекс не трогает, а в них остались версии файлов от коммита с которого мы ушли. Т.е. он отменяет последний коммит(если откатились на один коммит назад), а все файлы уже подготовлены для коммита. По сути это новый коммит, но можно взять информацию из отмененного коммита(флаг -c - если маленькая буква с - то откроется редактор, где описание можно будет поправить, а если большая(-С) то без редактирования):  

                                      git commit -С ORIG_HEAD  

флаг -с(-С) - берет не только сообщение но и данные об авторе  

git commit -C ORIG_HEAD --reset-author - такая  команда возьмет из ORIG_HEAD только сообщение.  

Чтобы отменить мягкий reset - выполним **git reset --soft** (указатель на предыдущий коммит или ORIG_HEAD)  

Отмена коммита это настолько типичная операция в git что для нее есть отдельный флаг комманды коммит --amend  

Команда commit --amend сделала 2 действия: сначала она передвинула текущую ветку назад(т.е. сделала тоже самое что и git reset --soft @~), при этом все файлы в рабочей директории и Index остались как есть, откатилась только ссылка в репозитории. А затем создала из текущего Index(с учетом последних изменений) новый коммит.  

С этой командой также можно использовать флаг --no-edit (полная команда git commit --amend --no-edit) - которая отменяет вызов редактора Vim

Изменить коммит нельзя, это касается и описания тоже.  

git --amend - быстрая замена текущего коммита  

Редактирование описания коммита - достаточно просто вызвать команду git commit --amend - откатит текущий коммит и создаст новый на основе текущего индекса после чего вызовется редактор где можно поправить описание.  

**Смешанный reset**  
Он перемещает ветку и обновляет Index на новое состояние, но при этом не трогает рабочую директорию(т.е. в рабочей директории будут файлы на момент коммита с которого мы ушли, но а Index будет на момент того коммита на который перешли(т.е. пустой))  

git reset --mixed аналогичен git reset(т.к. это режим по умолчанию)  

Он удобнее чем мягкий reset если мы хотим переформировать Index заново  

Важнейшее применение смешанного reset - очистка Index:  

      git reset HEAD - т.е. ветка переносится туда же где и сейчас и происходит сброс Index на состояние соответствующее указанному коммиту(в данном случае HEAD)  

В отличие от всех других режимов, смешанный reset позволяет указывать конкретные пути - т.е. если был проиндексирован какой-то файл по ошибке, то можно сбросить в Index именно его:  

                                      git add index.html - проиндексирован по ошибке
                                      git reset index.html - сбросить именно его  

Т.е. такая команда является антиподом для git add  

Смешанный reset позволяет вместе с путями передавать еще и коммит:  

      git reset 54a4 index.html - файлы по указанным путям(в данном случае index.html) обновляются на состояние, соответствующее указанному коммиту, но только в Index - т.е. ветка не двигается, в репозитории ничего не меняется и рабочая директория тоже не затрагивается. Дальше если сделать коммит то эта версия файла сохранится => получится что мы достали эту версию из другого коммита и сделали ее текущей.  

      git checkout 54a4 index.html - также достает index.html из указанного коммита но помещает его не только в Index, но и в рабочую директорию