При слиянии двух веток создается новый коммит, который представляет новое состояние проекта, содержащее изменения из обоих веток.  

Алгоритм слияния сначала найдет где ветки разделились, т.е. общий коммит-предок для обоих веток. Для определения коммита-предка есть команда:  

                                                git merge-base branch_1 branch_2  

Дальше для каждого файла сравниваются 3 версии:  
 - первая - которая была в их общем предке(base)
 - вторая - которая на текущей ветке(ours)
 - третья - theirs - сливаемая версия  

Git берет базовую версию за основу и добавляет в нее изменения из нашей и сливаемой версии:  

                                                base + (our changes) + (their changes) -> merge  

Таким образом получаем новую версию файла с изменениями, которые внесены в обоих ветках. Если поменяли файл в одном и том же месте по-разному - конфликт.  

Прерванное слияние - состояние при конфликте. 

Git запоминает коммит с которым мы осуществляем слияние в файле .git/MERGE_HEAD (т.е. если сливаем ветку feature в master то это тот коммит который был последним в feature)  

Если в одной из веток файл менялся, а в другой нет, то в результат слияния попадут более новые изменения.  

![img_1](https://user-images.githubusercontent.com/35499834/46913104-5184ea80-cf87-11e8-8867-20da76c04013.png)

Чтобы отменить процесс слияния:  
**git reset --hard** - прекратит слияние и очистит все незакоммиченные изменения включая конфликты.  

**git reset --merge** - оставляет незакоммиченные изменения в файлах, которые не участвовали в слиянии. **git merge --abort** - тоже самое но его проще запомнить.  

**git checkout --conflict=diff3 --merge <file_name>** - в редакторе будут поля ours, theirs, base  

Чтобы всегда представлялось 3 части слияния - добавим настройку конфигурации:  

                                                git config --global merge.conflictStyle diff3  

Чтобы завершить слияние, нужно сделать коммит:  

        git commit
           или
        git merge --continue  

